<!DOCTYPE html>
<!-- saved from url=(0094)http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/webapps/examples/websocket/chat.html?view=co -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Apache Tomcat WebSocket Examples: Chat</title>
    <link href="/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src='/resources/jquery-1.10.2.min.js' type="text/javascript"></script>
    <script src='/resources/bootstrap/js/bootstrap.min.js' type="text/javascript"></script>
    <script src='/resources/chat/js/chatsocket.js' type="text/javascript"></script>
</head>
<body>
<div class="container">
    <div class="body-content">
        <div class="row">
            <div draggable="true" class="col-lg-4 panel">
                <div class="panel-heading">Chatter</div>
                <div>
                    <div class="input-group">
                        <input type="text" class="form-control">
                      <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Go!</button>
                      </span>
                        <script src="//vk.com/js/api/openapi.js" type="text/javascript"></script>

                        <div id="login_button" onclick="VK.Auth.login(authInfo);"></div>

                        <script language="javascript">
                            VK.init({
                                apiId: 4551676
                            });
                            function authInfo(response) {
                                if (response.session) {
                                    VK.Api.call('users.get', {uids: response.session.mid, fields:"screen_name,photo_200_orig"}, function(r) {
                                        if(r.response) {
                                            Chat.initialize('/ws/chat?screen_name=' + r.response[0].screen_name +
                                                    '&first_name=' + r.response[0].first_name +
                                                    '&last_name=' + r.response[0].last_name +
                                                    '&photo_200_orig=' + r.response[0].photo_200_orig,'blob');
                                            Chat.socket.onmessage = function(evt){
                                                alert(evt.data);
                                            }
                                        }
                                    });
                                } else {
                                    alert('not auth');
                                }
                            }
                            VK.Auth.login(authInfo);
                            VK.UI.button('login_button');
                        </script>
                    </div>
                </div>
                <br />
                <div class="highlight" style="overflow: auto;width:auto;height: 600px;">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="badge">system</span>
                            <p>Hello! Welcome to Chatter!!</p>
                        <li class="list-group-item">
                            <span class="badge">kos</span>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium alias aliquam animi aperiam architecto
                                aut autem beatae commodi corporis deserunt doloribus ea, eaque error, et ex expedita id illo in ipsa ipsam itaque iure
                                libero nam natus nemo non nostrum obcaecati odio officia quod, repellat repellendus reprehenderit repudiandae rerum tenetur
                                vitae voluptas! Accusantium aliquam asperiores assumenda aut blanditiis cumque dolorem dolores eaque fugit id impedit laborum
                                minus necessitatibus nesciunt, non numquam obcaecati quibusdam ratione repellat rerum sequi sint voluptatum? At exercitationem
                                incidunt inventore modi reiciendis sequi unde velit. Animi consequatur fuga harum obcaecati officia ut. Aperiam debitis ex illo
                                magni molestias officiis perspiciatis totam? Adipisci assumenda at debitis, doloremque eligendi error facilis fuga illo labore
                                maiores modi quasi saepe ullam!a</p>
                        </li>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-8">
                <h1>Conference</h1>
            </div>
        </div>
    </div>
</div>
</body>
</html>